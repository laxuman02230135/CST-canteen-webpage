"use strict";(()=>{var e={};e.id=108,e.ids=[108],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7424:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>w,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>y,staticGenerationAsyncStorage:()=>f});var n={};r.r(n),r.d(n,{DELETE:()=>l,GET:()=>u,PUT:()=>d});var i=r(9303),a=r(8716),o=r(670);let s=new(r(3524)).PrismaClient;function p(e,t=200){return new Response(JSON.stringify(e),{status:t,headers:{"Content-Type":"application/json"}})}async function u(e,{params:t}){try{let e=parseInt(t.id);if(isNaN(e))return p({error:"Invalid order ID"},400);let r=await s.order.findUnique({where:{id:e}});if(!r)return p({error:"Order not found"},404);return p(r)}catch(e){return console.error(e),p({error:"Failed to fetch order"},500)}}async function d(e,{params:t}){try{let r=parseInt(t.id);if(isNaN(r))return new Response(JSON.stringify({error:"Invalid menu item ID"}),{status:400,headers:{"Content-Type":"application/json"}});let{title:n,description:i,price:a,image:o,category:p}=await e.json(),u=parseFloat(a.replace(/[^0-9.]/g,""));if(isNaN(u)||u<0)return new Response(JSON.stringify({error:"Invalid price format"}),{status:400,headers:{"Content-Type":"application/json"}});let d={"main-meals":"MAIN_MEALS","quick-bites":"QUICK_BITES",beverages:"BEVERAGES"};if(!d[p])return new Response(JSON.stringify({error:"Invalid category"}),{status:400,headers:{"Content-Type":"application/json"}});let l=await s.menuItem.update({where:{id:r},data:{title:n,description:i,price:u,image:o,category:d[p]}}),c={...l,category:p,price:`Nu. ${l.price.toFixed(2)}`};return new Response(JSON.stringify(c),{status:200,headers:{"Content-Type":"application/json"}})}catch(e){return console.error("Error updating menu item:",e),new Response(JSON.stringify({error:"Failed to update menu item"}),{status:500,headers:{"Content-Type":"application/json"}})}finally{await s.$disconnect()}}async function l(e,{params:t}){try{let e=parseInt(t.id);if(isNaN(e))return new Response(JSON.stringify({error:"Invalid menu item ID"}),{status:400,headers:{"Content-Type":"application/json"}});if(!await s.menuItem.findUnique({where:{id:e}}))return new Response(JSON.stringify({error:"Menu item not found"}),{status:404,headers:{"Content-Type":"application/json"}});return await s.menuItem.delete({where:{id:e}}),new Response(null,{status:204})}catch(e){return console.error("Error deleting menu item:",e),new Response(JSON.stringify({error:"Failed to delete menu item"}),{status:500,headers:{"Content-Type":"application/json"}})}finally{await s.$disconnect()}}let c=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/menu/[id]/route",pathname:"/api/menu/[id]",filename:"route",bundlePath:"app/api/menu/[id]/route"},resolvedPagePath:"D:\\CST-canteen-webpage\\app\\api\\menu\\[id]\\route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:y}=c,h="/api/menu/[id]/route";function w(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:f})}},9303:(e,t,r)=>{e.exports=r(517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948],()=>r(7424));module.exports=n})();