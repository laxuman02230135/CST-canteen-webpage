"use strict";(()=>{var e={};e.id=538,e.ids=[538],e.modules={3524:e=>{e.exports=require("@prisma/client")},7096:e=>{e.exports=require("bcrypt")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6991:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>c});var r={};t.r(r),t.d(r,{POST:()=>u});var a=t(9303),n=t(8716),i=t(670),o=t(5995),p=t(7096),l=t.n(p);async function u(e){try{let{name:s,email:t,password:r}=await e.json();if(console.log("Signup attempt for email:",t),!s||!t||!r)return console.log("Missing required fields"),new Response(JSON.stringify({message:"All fields are required"}),{status:400,headers:{"Content-Type":"application/json"}});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return console.log("Invalid email format:",t),new Response(JSON.stringify({message:"Invalid email format"}),{status:400,headers:{"Content-Type":"application/json"}});if(r.length<6)return console.log("Password too short"),new Response(JSON.stringify({message:"Password must be at least 6 characters long"}),{status:400,headers:{"Content-Type":"application/json"}});if(await o.Z.user.findUnique({where:{email:t.toLowerCase()}}))return console.log("Email already registered:",t),new Response(JSON.stringify({message:"Email already registered"}),{status:409,headers:{"Content-Type":"application/json"}});let a=await l().hash(r,10),n=await o.Z.user.create({data:{name:s,email:t.toLowerCase(),password:a}});console.log("User registered successfully:",t);let{password:i,...p}=n;return new Response(JSON.stringify({message:"User registered successfully",user:p}),{status:201,headers:{"Content-Type":"application/json"}})}catch(e){return console.error("Signup error details:",{message:e.message,stack:e.stack,name:e.name}),new Response(JSON.stringify({message:"Internal server error"}),{status:500,headers:{"Content-Type":"application/json"}})}}let d=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/signup/route",pathname:"/api/signup",filename:"route",bundlePath:"app/api/signup/route"},resolvedPagePath:"D:\\CST-canteen-webpage\\app\\api\\signup\\route.js",nextConfigOutput:"",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:c,serverHooks:m}=d,f="/api/signup/route";function h(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:c})}},5995:(e,s,t)=>{t.d(s,{Z:()=>a});var r=t(3524);let a=globalThis.prisma??new r.PrismaClient},9303:(e,s,t)=>{e.exports=t(517)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948],()=>t(6991));module.exports=r})();