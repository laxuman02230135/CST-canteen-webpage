(()=>{var e={};e.id=626,e.ids=[626],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},8876:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(9130),s(7764),s(5866);var a=s(3191),r=s(8716),i=s(7922),n=s.n(i),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9130)),"D:\\CST-canteen-webpage\\app\\login\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,7764)),"D:\\CST-canteen-webpage\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\CST-canteen-webpage\\app\\login\\page.js"],u="/login/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2459:()=>{},4979:(e,t,s)=>{Promise.resolve().then(s.bind(s,2415))},2557:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},2415:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(326),r=s(7577),i=s(1329),n=s(6670),l=s.n(n),o=s(434),d=s(5047);function c(){let[e,t]=(0,r.useState)({email:"",password:""}),[s,n]=(0,r.useState)({email:"",password:""}),[c,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),x=(0,d.useRouter)(),f=a=>{let{name:r,value:i}=a.target;t({...e,[r]:i}),n({...s,[r]:""}),u("")},b=()=>{let t=!0,s={email:"",password:""};return e.email?/\S+@\S+\.\S+/.test(e.email)||(s.email="Invalid email format",t=!1):(s.email="Email is required",t=!1),e.password?e.password.length<6&&(s.password="Password must be at least 6 characters",t=!1):(s.password="Password is required",t=!1),n(s),t},j=async t=>{if(t.preventDefault(),b()){p(!0),u("");try{if("admin@cstcanteen.com"===e.email.toLowerCase()&&"123456"===e.password){localStorage.setItem("username","ADMIN"),localStorage.setItem("email",e.email),g(!0),setTimeout(()=>{x.push("/admin")},1e3);return}let t=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(t.ok){let t=s.user.name.toUpperCase();localStorage.setItem("username",t),localStorage.setItem("email",e.email),g(!0),setTimeout(()=>{x.push("/dashboard")},1e3)}else u(s.message||"Invalid login credentials")}catch(e){u("Something went wrong. Please try again later.")}finally{p(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[a.jsx("title",{children:"Login | CST Canteen"}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),a.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"}),a.jsx("script",{src:"https://cdn.tailwindcss.com"})]}),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("img",{src:"https://st4.depositphotos.com/16061158/39264/v/450/depositphotos_392644810-stock-illustration-food-vector-icon-food-editable.jpg",alt:"Canteen Logo",className:"h-16 w-16"})}),a.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Login to CST Canteen"}),c&&a.jsx("p",{className:"text-red-500 text-center mb-4",children:c}),h&&a.jsx(i.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.5},className:"text-green-500 text-center mb-4",children:"Login Successfull! Redirecting..."}),(0,a.jsxs)("form",{onSubmit:j,children:[(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:f,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ${s.email?"border-red-500":"focus:ring-blue-500"}`,placeholder:"Enter your email","aria-describedby":s.email?"email-error":void 0}),s.email&&a.jsx("p",{id:"email-error",className:"text-red-500 text-sm mt-1",children:s.email})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",name:"password",value:e.password,onChange:f,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ${s.password?"border-red-500":"focus:ring-blue-500"}`,placeholder:"Enter your password","aria-describedby":s.password?"password-error":void 0}),s.password&&a.jsx("p",{id:"password-error",className:"text-red-500 text-sm mt-1",children:s.password})]}),a.jsx("button",{type:"submit",disabled:m,className:`w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition duration-300 ${m?"cursor-not-allowed opacity-70":""}`,children:m?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[a.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Logging in..."]}):"Login"})]}),(0,a.jsxs)("p",{className:"mt-4 text-center text-gray-600",children:["Don't have an account?"," ",a.jsx(o.default,{href:"/signup",className:"text-blue-500 hover:underline",children:"Sign Up"})]})]})})]})}},5047:(e,t,s)=>{"use strict";var a=s(7389);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},6670:(e,t)=>{"use strict";function s(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7764:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>r});var a=s(9510);s(7272);let r={title:"CST Canteen",description:"Order food online at CST Canteen"};function i({children:e}){return(0,a.jsxs)("html",{lang:"en",children:[a.jsx("head",{children:a.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"})}),a.jsx("body",{children:e})]})}},9130:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`D:\CST-canteen-webpage\app\login\page.js#default`)},7481:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(6621);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,471,621,434,329],()=>s(8876));module.exports=a})();