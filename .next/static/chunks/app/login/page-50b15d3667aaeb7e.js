(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4620:function(e,t,s){Promise.resolve().then(s.bind(s,2175))},2175:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),r=s(2265),i=s(4368),l=s(6225),n=s.n(l),o=s(7648),c=s(9376);function d(){let[e,t]=(0,r.useState)({email:"",password:""}),[s,l]=(0,r.useState)({email:"",password:""}),[d,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),[f,h]=(0,r.useState)(!1),x=(0,c.useRouter)(),g=a=>{let{name:r,value:i}=a.target;t({...e,[r]:i}),l({...s,[r]:""}),u("")},b=()=>{let t=!0,s={email:"",password:""};return e.email?/\S+@\S+\.\S+/.test(e.email)||(s.email="Invalid email format",t=!1):(s.email="Email is required",t=!1),e.password?e.password.length<6&&(s.password="Password must be at least 6 characters",t=!1):(s.password="Password is required",t=!1),l(s),t},w=async t=>{if(t.preventDefault(),b()){p(!0),u("");try{if("admin@cstcanteen.com"===e.email.toLowerCase()&&"123456"===e.password){localStorage.setItem("username","ADMIN"),localStorage.setItem("email",e.email),h(!0),setTimeout(()=>{x.push("/admin")},1e3);return}let t=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(t.ok){let t=s.user.name.toUpperCase();localStorage.setItem("username",t),localStorage.setItem("email",e.email),h(!0),setTimeout(()=>{x.push("/dashboard")},1e3)}else u(s.message||"Invalid login credentials")}catch(e){u("Something went wrong. Please try again later.")}finally{p(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:"Login | CST Canteen"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,a.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"}),(0,a.jsx)("script",{src:"https://cdn.tailwindcss.com"})]}),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)("img",{src:"https://st4.depositphotos.com/16061158/39264/v/450/depositphotos_392644810-stock-illustration-food-vector-icon-food-editable.jpg",alt:"Canteen Logo",className:"h-16 w-16"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Login to CST Canteen"}),d&&(0,a.jsx)("p",{className:"text-red-500 text-center mb-4",children:d}),f&&(0,a.jsx)(i.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.5},className:"text-green-500 text-center mb-4",children:"Login Successfull! Redirecting..."}),(0,a.jsxs)("form",{onSubmit:w,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"email",children:"Email"}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ".concat(s.email?"border-red-500":"focus:ring-blue-500"),placeholder:"Enter your email","aria-describedby":s.email?"email-error":void 0}),s.email&&(0,a.jsx)("p",{id:"email-error",className:"text-red-500 text-sm mt-1",children:s.email})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"password",children:"Password"}),(0,a.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ".concat(s.password?"border-red-500":"focus:ring-blue-500"),placeholder:"Enter your password","aria-describedby":s.password?"password-error":void 0}),s.password&&(0,a.jsx)("p",{id:"password-error",className:"text-red-500 text-sm mt-1",children:s.password})]}),(0,a.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition duration-300 ".concat(m?"cursor-not-allowed opacity-70":""),children:m?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Logging in..."]}):"Login"})]}),(0,a.jsxs)("p",{className:"mt-4 text-center text-gray-600",children:["Don't have an account?"," ",(0,a.jsx)(o.default,{href:"/signup",className:"text-blue-500 hover:underline",children:"Sign Up"})]})]})})]})}},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},6225:function(e,t){"use strict";function s(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},function(e){e.O(0,[648,368,971,117,744],function(){return e(e.s=4620)}),_N_E=e.O()}]);