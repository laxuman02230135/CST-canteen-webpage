(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{5365:function(e,t,r){Promise.resolve().then(r.bind(r,4466))},4466:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(7437),n=r(2265),a=r(9376),o=r(6225),i=r.n(o),l=r(7648),d=r(8614),c=r(4368);function u(){let e=(0,a.useRouter)(),[t,r]=(0,n.useState)({name:"",email:"",password:"",confirmPassword:""}),[o,u]=(0,n.useState)({name:"",email:"",password:"",confirmPassword:""}),[m,f]=(0,n.useState)(""),[p,h]=(0,n.useState)(!1),[x,w]=(0,n.useState)(!1),g=e=>{let{name:s,value:n}=e.target;r({...t,[s]:n}),u({...o,[s]:""}),f(""),w(!1)},b=()=>{let e=!0,r={name:"",email:"",password:"",confirmPassword:""};return t.name||(r.name="Name is required",e=!1),t.email?/\S+@\S+\.\S+/.test(t.email)||(r.email="Invalid email format",e=!1):(r.email="Email is required",e=!1),t.password?t.password.length<6&&(r.password="Password must be at least 6 characters",e=!1):(r.password="Password is required",e=!1),t.confirmPassword?t.password!==t.confirmPassword&&(r.confirmPassword="Passwords do not match",e=!1):(r.confirmPassword="Please confirm your password",e=!1),u(r),e},j=async s=>{if(s.preventDefault(),b()){h(!0),f(""),w(!1);try{let s=await fetch("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,password:t.password})}),n=await s.json();s.ok?(w(!0),r({name:"",email:"",password:"",confirmPassword:""}),setTimeout(()=>{e.push("/login")},1e3)):f(n.message||"Something went wrong")}catch(e){console.error("Signup failed:",e),f("Something went wrong. Please try again later.")}finally{h(!1)}}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"Signup | CST Canteen"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,s.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"}),(0,s.jsx)("script",{src:"https://cdn.tailwindcss.com"})]}),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsx)("img",{src:"https://st4.depositphotos.com/16061158/39264/v/450/depositphotos_392644810-stock-illustration-food-vector-icon-food-editable.jpg",alt:"Canteen Logo",className:"h-16 w-16"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Sign Up for CST Canteen"}),(0,s.jsx)(d.M,{children:x&&(0,s.jsx)(c.E.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.4},className:"text-green-600 font-semibold mb-4 text-center",children:"Registration successful!"})}),m&&(0,s.jsx)("p",{className:"text-red-500 text-center mb-4",children:m}),(0,s.jsxs)("form",{onSubmit:j,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"name",children:"Name"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:t.name,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ".concat(o.name?"border-red-500":"focus:ring-green-500"),placeholder:"Enter your name","aria-describedby":o.name?"name-error":void 0}),o.name&&(0,s.jsx)("p",{id:"name-error",className:"text-red-500 text-sm mt-1",children:o.name})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"email",children:"Email"}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:t.email,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ".concat(o.email?"border-red-500":"focus:ring-green-500"),placeholder:"Enter your email","aria-describedby":o.email?"email-error":void 0}),o.email&&(0,s.jsx)("p",{id:"email-error",className:"text-red-500 text-sm mt-1",children:o.email})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"password",children:"Password"}),(0,s.jsx)("input",{type:"password",id:"password",name:"password",value:t.password,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ".concat(o.password?"border-red-500":"focus:ring-green-500"),placeholder:"Enter your password","aria-describedby":o.password?"password-error":void 0}),o.password&&(0,s.jsx)("p",{id:"password-error",className:"text-red-500 text-sm mt-1",children:o.password})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"confirmPassword",children:"Confirm Password"}),(0,s.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ".concat(o.confirmPassword?"border-red-500":"focus:ring-green-500"),placeholder:"Confirm your password","aria-describedby":o.confirmPassword?"confirmPassword-error":void 0}),o.confirmPassword&&(0,s.jsx)("p",{id:"confirmPassword-error",className:"text-red-500 text-sm mt-1",children:o.confirmPassword})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 transition duration-300 flex justify-center items-center",disabled:p,children:p?(0,s.jsx)("span",{className:"w-5 h-5 border-4 border-white border-t-transparent rounded-full animate-spin","aria-label":"Loading spinner"}):"Sign Up"})]}),(0,s.jsxs)("p",{className:"mt-4 text-center text-gray-600",children:["Already have an account?"," ",(0,s.jsx)(l.default,{href:"/login",className:"text-blue-500 hover:underline",children:"Login"})]})]})})]})}},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6225:function(e,t){"use strict";function r(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8614:function(e,t,r){"use strict";r.d(t,{M:function(){return g}});var s=r(7437),n=r(2265),a=r(8881),o=r(3576),i=r(1534),l=r(4252),d=r(3537),c=r(5750);class u extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,d.R)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m(e){let{children:t,isPresent:r,anchorX:a}=e,o=(0,n.useId)(),i=(0,n.useRef)(null),l=(0,n.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=(0,n.useContext)(c._);return(0,n.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:n,right:c}=l.current;if(r||!i.current||!e||!t)return;i.current.dataset.motionPopId=o;let u=document.createElement("style");return d&&(u.nonce=d),document.head.appendChild(u),u.sheet&&u.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===a?"left: ".concat(n):"right: ".concat(c),"px !important;\n            top: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.contains(u)&&document.head.removeChild(u)}},[r]),(0,s.jsx)(u,{isPresent:r,childRef:i,sizeRef:l,children:n.cloneElement(t,{ref:i})})}let f=e=>{let{children:t,initial:r,isPresent:a,onExitComplete:i,custom:d,presenceAffectsLayout:c,mode:u,anchorX:f}=e,h=(0,o.h)(p),x=(0,n.useId)(),w=!0,g=(0,n.useMemo)(()=>(w=!1,{id:x,initial:r,isPresent:a,custom:d,onExitComplete:e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;i&&i()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[a,h,i]);return c&&w&&(g={...g}),(0,n.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[a]),n.useEffect(()=>{a||h.size||!i||i()},[a]),"popLayout"===u&&(t=(0,s.jsx)(m,{isPresent:a,anchorX:f,children:t})),(0,s.jsx)(l.O.Provider,{value:g,children:t})};function p(){return new Map}var h=r(9637);let x=e=>e.key||"";function w(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}let g=e=>{let{children:t,custom:r,initial:l=!0,onExitComplete:d,presenceAffectsLayout:c=!0,mode:u="sync",propagate:m=!1,anchorX:p="left"}=e,[g,b]=(0,h.oO)(m),j=(0,n.useMemo)(()=>w(t),[t]),y=m&&!g?[]:j.map(x),v=(0,n.useRef)(!0),P=(0,n.useRef)(j),N=(0,o.h)(()=>new Map),[C,S]=(0,n.useState)(j),[E,R]=(0,n.useState)(j);(0,i.L)(()=>{v.current=!1,P.current=j;for(let e=0;e<E.length;e++){let t=x(E[e]);y.includes(t)?N.delete(t):!0!==N.get(t)&&N.set(t,!1)}},[E,y.length,y.join("-")]);let _=[];if(j!==C){let e=[...j];for(let t=0;t<E.length;t++){let r=E[t],s=x(r);y.includes(s)||(e.splice(t,0,r),_.push(r))}return"wait"===u&&_.length&&(e=_),R(w(e)),S(j),null}let{forceRender:k}=(0,n.useContext)(a.p);return(0,s.jsx)(s.Fragment,{children:E.map(e=>{let t=x(e),n=(!m||!!g)&&(j===E||y.includes(t));return(0,s.jsx)(f,{isPresent:n,initial:(!v.current||!!l)&&void 0,custom:r,presenceAffectsLayout:c,mode:u,onExitComplete:n?void 0:()=>{if(!N.has(t))return;N.set(t,!0);let e=!0;N.forEach(t=>{t||(e=!1)}),e&&(null==k||k(),R(P.current),m&&(null==b||b()),d&&d())},anchorX:p,children:e},t)})})}}},function(e){e.O(0,[648,368,971,117,744],function(){return e(e.s=5365)}),_N_E=e.O()}]);